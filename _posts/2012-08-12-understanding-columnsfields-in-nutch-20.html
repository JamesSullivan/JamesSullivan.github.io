---
layout: post
title: Understanding the columns/fields in Nutch 2.0 Webpage
date: '2012-08-12T12:44:00.001-07:00'
categories: programming
author: Sully
tags:
- SQL
- programming
- search
- Nutch
modified_time: '2023-01-11T05:26:54.764-08:00'
thumbnail: https://lh5.googleusercontent.com/SiOlbNA_wJHYQ71IRhsXmYhs2by8sRosIBjW6u9dkPaDU0murD20_bF1ESrPessDG6O3lm8gdgQTS1hzX-Nsr0HkFvWgCP_My1Y1cJ92mIgDKDz98em9UpGZAdaOVH5OYM9hrVYmyWUCd6Y52Urlz_EnugHkpZb92jFnzL7ieMThd9du_ZTG=s72-c
blogger_id: tag:blogger.com,1999:blog-7835395644559909128.post-2886805213650554528
blogger_orig_url: http://blog.solutions.asia/2012/08/understanding-columnsfields-in-nutch-20.html
---

One of the great things about Nutch 2.0 and the move to GORA is that the datastore is much more easily accessible than it was under Nutch 1.x. In particular, if you are are using Nutch 2.0 with MySQL you can leverage your existing SQL knowledge and SQL tools to see what is going on in the background. This makes both learning and debugging Nutch 2.0 significantly easier than previous versions. In any case, as the goal of this article is to give a brief explanation of each column in the webpage table so that you can better understand what is happening when running Nutch, it is applicable to all Nutch 2.0 back end stores, not just SQL stores.<br /><br />Before jumping in, it is helpful to quickly review how Nutch crawls the web and stores those results at a very high level as the steps of the crawl are linked to the columns in the webpage table. First, an initial set of seed urls are <a href="http://wiki.apache.org/nutch/InjectOptions" title="Inject Options">injected</a> then there are repeated web crawling cycles. These crawl cycles consist of <a href="http://wiki.apache.org/nutch/Nutch2Crawling#Generate" title="Generate Step">generate</a>, <a href="http://wiki.apache.org/nutch/Nutch2Crawling#Fetch" title="Fetch Step">fetch</a>, <a href="http://wiki.apache.org/nutch/Nutch2Crawling#Parse" title="Parse Step">parse</a> and <a href="http://wiki.apache.org/nutch/Nutch2Crawling#DbUpdate" title="DbUpdate Step">database update job</a> steps. These steps use the various columns in the webpage table in the Nutch database.<br /><br /><span id="docs-internal-guid-b2243ec1-7fff-6664-7405-93c4fdbe5779"><span style="font-family: Arial; font-size: 11pt; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;"><span style="border: none; display: inline-block; height: 284px; overflow: hidden; width: 400px;"><img height="284" src="https://lh5.googleusercontent.com/SiOlbNA_wJHYQ71IRhsXmYhs2by8sRosIBjW6u9dkPaDU0murD20_bF1ESrPessDG6O3lm8gdgQTS1hzX-Nsr0HkFvWgCP_My1Y1cJ92mIgDKDz98em9UpGZAdaOVH5OYM9hrVYmyWUCd6Y52Urlz_EnugHkpZb92jFnzL7ieMThd9du_ZTG" style="margin-left: 0px; margin-top: 0px;" width="400" /></span></span></span><br /><br />The following list contains all of the columns in the webpage in the order they are in the table.&nbsp;When looking at the webpage table in the Nutch database remember every row in the webpage table represents an individual url.&nbsp; Where applicable it is noted which step of the crawl cycle the column is primarily used by.<br /><a name='more'></a><br /><span id="docs-internal-guid-7f0f7453-7fff-2781-0177-f2b86d95411b"><span style="font-family: Arial; font-size: 11pt; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;"><span style="border: none; display: inline-block; height: 283px; overflow: hidden; width: 539px;"><img height="283" src="https://lh5.googleusercontent.com/UFAPg4ihvpyjqvu-q12rUMAhhyodcSKFRH5Rvkq60UGx61DnbvCWdWp36NJRZtwhvkmcQWo9TvjvdAKko-A8nmNNT9dMMR2nq2so5Aok4GdAvo5d07EicoJ7AP8JqvPM0dWXcaxHHTiKQTppc7C5msuVkKiodtIym7IYi8odLe_ZRkuzgnYm" style="margin-left: 0px; margin-top: 0px;" width="539" /></span></span></span><br /><br /><b>id</b> - Generator Field. This is used as the index of the table and consists of the url in a slightly different order (reversed domain name:protocol:port and path) from the order normally seen in your web browser so that it can be searched more quickly. Nutch contains convenience utility methods such as for unreversing urls at <a href="http://nutch.apache.org/apidocs-2.0/org/apache/nutch/util/TableUtil.html" target="_blank" title="reverse url utilities">TableUtil</a>. Note that using a url as the primary key means the default Nutch 2.0 design is to keep track of the current state of the crawl universe. Nutch 2.0 is not designed for keeping an archive of pages over time as they change (at least without a little modification).<br />example: <code>org.creativecommons:http/press-releases/entry/5064</code><br /><br /><b>headers</b> - <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html" target="_blank" title="Header Field Definitions">standard http headers</a> including various non printing characters.<br />example:<br /><br /><br /><b>text</b> - Parse field that is a conglameration of various text fields for general search purposes. Given advances in Solr I suspect this is no longer really needed except possibly for performance reasons.<br />example:<br /><pre>Creative Commons Unique Search Tool Now Integrated into Firefox 1.0 - Creative Commons Skip&nbsp;</pre><pre>Navigation Home Creative Commons Menu About Licenses Public Domain Support CC Projects News&nbsp;</pre><pre>About About CC History Who Uses CC? Case Studies Videos about CC The Team Board of&nbsp;</pre><pre>Directors ....</pre><br /><br /><br /><b>status</b> - fetch field used to store whether the link was actually fetched<br /><br /><table><tbody><tr><td>1</td><td>unfetched (links not yet fetched due to limits set in regex-urlfilter.txt, -TopN crawl parameters, etc.)</td></tr><tr><td>2</td><td>fetched (page was successfully fetched)</td></tr><tr><td>3</td><td>gone (that page no longer exists)</td></tr><tr><td>4</td><td>redir_temp (temporary redirection -- see reprUrl below for more details)</td></tr><tr><td>5</td><td>redir_perm (permanent redirection -- see reprUrl below for more details)</td></tr><tr><td>34</td><td>retry</td></tr><tr><td>38</td><td>not modified</td></tr></tbody></table>example: <code>2</code><br /><br /><b>markers</b> - contains the inject, generate, fetch and parse marks with the batchId used as value in the marker<sup>*</sup>. See <a href="http://wiki.apache.org/nutch/Nutch2Crawling" target="_blank" title="Nutch2Crawling">Nutch2Crawling</a><br />example: <code>_ftcmrk_(1344476998-339713229_gnmrk_(1344476998-339713229__prsmrk__(1344476998-339713229</code><br /><br /><b>parseStatus</b> - Parse field normally null until parsing attempted. For list of codes see. <a href="http://nutch.apache.org/apidocs-2.0/org/apache/nutch/parse/ParseStatusCodes.html" target="_blank" title="ParseStatusCodes">ParseStatusCodes.html</a><br />example (3 bytes): <code>02 00 00</code><br /><br /><b>modifiedTime</b> - Fetch field - supposed to be last time signature changed (may have defect causing it to turn to 0 after multiple crawls).<br />example: <code>1344597206693</code><br /><br /><b>score</b> - DbUpdate field ranking a given url/page's importance. Higher is better. See <a href="http://wiki.apache.org/nutch/NewScoring" target="_blank" title="NewScoring">NewScoring</a><br />example: <code>0.0183057</code><br /><br /><b>typ</b> - Fetch field containing the mime type <a href="http://en.wikipedia.org/wiki/Internet_media_type" target="_blank" title="Internet_media_type">Internet_media_type</a> for the document such as text/html or application/pdf. Note that some Mime types are excluded by default and this can be modified in conf/regex-urlfilter.txt.<br />example: <code>text/html</code><br /><br /><b>baseUrl</b> - Fetch field. The base url for relative links contained in the content. Maybe be different from url if the request redirected.<br />example: <code>http://gora.apache.org/</code><br /><br /><b>content</b> - Fetch Field - content of the URL.<br />example: <br /><pre>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt; <br />&lt;html&gt; <br />&lt;head&gt; <br />&lt;META http-equiv="<a href="https://www.blogger.com/null">Content-Type</a>" content="<a href="https://www.blogger.com/null">text/html; charset=UTF-8</a>"&gt; <br />&lt;meta content="<a href="https://www.blogger.com/null">Apache Forrest</a>" name="<a href="https://www.blogger.com/null">Generator</a>"&gt; <br />&lt;meta name="<a href="https://www.blogger.com/null">Forrest-version</a>" content="<a href="https://www.blogger.com/null">0.9</a>"&gt; <br />&lt;meta name="<a href="https://www.blogger.com/null">Forrest-skin-name</a>" content="<a href="https://www.blogger.com/null">nutch</a>"&gt; <br />&lt;title&gt;Welcome to Apache Nutch&amp;#153;&lt;/title&gt; <br />&lt;link type="<a href="https://www.blogger.com/null">text/css</a>" href="<a href="view-source:http://nutch.apache.org/skin/basic.css">skin/basic.css</a>" rel="<a href="https://www.blogger.com/null">stylesheet</a>"&gt; <br />&lt;link media="<a href="https://www.blogger.com/null">screen</a>" type="<a href="https://www.blogger.com/null">text/css</a>" href="<a href="view-source:http://nutch.apache.org/skin/screen.css">skin/screen.css</a>" rel="<a href="https://www.blogger.com/null">stylesheet</a>"&gt; <br />&lt;link media="<a href="https://www.blogger.com/null">print</a>" type="<a href="https://www.blogger.com/null">text/css</a>" href="<a href="view-source:http://nutch.apache.org/skin/print.css">skin/print.css</a>" rel="<a href="https://www.blogger.com/null">stylesheet</a>"&gt;<br />...</pre><br /><b>title</b> - Parse field - The text in the title tags of the HTML head.<br />example: <code>Welcome to Apache Nutch™</code><br /><br /><b>reprUrl</b> - Fetch field for representative urls used for redirects. The default behaviour is that the fetcher won't immediately follow redirected URLs, instead it will record them for fetching during the next round. The documentation indicates that this can be changed to immediately follow redirected urls by copying the http.redirect.max property from conf/nutch-default.xml to conf/nutch-site.xml and changing the value to a value greater than 0. However, this is not yet implemented for Nutch 2.0 at this time and every redirect is handled during the next fetch regardless of the property of http.redirect.max.<sup>*</sup><br />example: <code>http://www.apachecon.eu/c/aceu2009/sessions/136</code><br /><br /><b>fetchInterval</b> - Fetch field containing default interval until next fetch in seconds (defaults to 30 days). See fetchTime field default explanation. Can be set at the url level when injecting so the field is necessary (see <a href="http://wiki.apache.org/nutch/bin/nutch_inject" target="_blank" title="nutch_inject">nutch_inject</a>).<br />example: <code>2592000</code><br /><br /><b>prevFetchTime</b> - Fetch field - previous value of fetch time, or null if not available. This is the previous Nutch fetch time, not to be confused with modifiedTime which is the time the content was actually modified. See fetchTime field default explanation.<br />example: <code>1347093015591</code><br /><br /><b>inlinks</b> - DbUpdate field with inbound links useful for Linkrank. See Webgraph at <a href="http://wiki.apache.org/nutch/NewScoring" target="_blank" title="NewScoring">NewScoring</a><br />example: <code>xhttp://blog.foofactory.fi/2007/03/twice-speed-half-size.html Website up</code><br /><br /><b>prevSignature</b> - Parse field -- previous signature. For more details see signature further down.<br />example (16 bytes): <code>25 59 5c 73 03 09 bb ed a0 98 5e b6 5e 0c 89 63</code><br /><br /><b>outlinks</b> - DbUpdate field - outbound links<br />example: <code>http://www.adobe.com/jp/products/acrobat/readstep2.html</code><br /><br /><b>fetchTime</b> - Fetch field used by Mapper to decide if it is time to fetch this url. See this link <a href="http://pascaldimassimo.com/2010/06/11/how-to-re-crawl-with-nutch/" target="_blank" title="how-to-re-crawl-with-nutch">how-to-re-crawl-with-nutch</a> for a well written overview. Also see the Nutch API documentation <a href="http://nutch.apache.org/apidocs-2.0/org/apache/nutch/crawl/AbstractFetchSchedule.html#setFetchSchedule%28java.lang.String,%20org.apache.nutch.storage.WebPage,%20long,%20long,%20long,%20long,%20int%29" target="_blank" title="AbstractFetchSchedule">AbstractFetchSchedule</a>. The default re-fetch schedule is somewhat simplistic. No matter if the page was changed or not, the fetchInterval remains unchanged, and the updated page fetchTime will always be set to fetchTime + fetchInterval * 1000. See <a href="http://nutch.apache.org/apidocs-2.0/org/apache/nutch/crawl/DefaultFetchSchedule.html" target="_blank" title="DefaultFetchSchedule">DefaultFetchSchedule</a>. A better implementation for most cases is the AdaptiveFetchSchedule <a href="http://nutch.apache.org/apidocs-2.0/org/apache/nutch/crawl/AdaptiveFetchSchedule.html" target="_blank" title="AdaptiveFetchSchedule">AdaptiveFetchSchedule</a>. The FetchSchedule implementation can be changed by copying the db.fetch.schedule.class property from conf/nutch-default.xml to conf/nutch-site.xml and changing the value.<br />example: <code>1347093160403</code><br /><br /><b>retriesSinceFetch</b> - Fetch field counter for number of retries to fetch due to (hopefully transient) errors since the last success. See <a href="http://nutch.apache.org/apidocs-2.0/org/apache/nutch/crawl/AbstractFetchSchedule.html#setPageRetrySchedule%28java.lang.String,%20org.apache.nutch.storage.WebPage,%20long,%20long,%20long%29" target="_blank" title="AbstractFetchSchedule">AbstractFetchSchedule</a><br />example: <code>2</code><br /><br /><b>protocolStatus</b> - Fetch field - see <a href="http://nutch.apache.org/apidocs-2.0/org/apache/nutch/protocol/ProtocolStatusCodes.html" target="_blank" title="ProtocolStatusCodes">ProtocolStatusCodes</a><br />example (3 bytes): <code>02 00 00</code><br /><br />ACCESS_DENIED         17<br />BLOCKED        23<br />EXCEPTION      16<br />FAILED         2<br />GONE           11<br />MOVED          12<br />NOTFETCHING    20<br />NOTFOUND       14<br />NOTMODIFIED    21<br />PROTO_NOT_FOUND  10<br />REDIR_EXCEEDED  19<br />RETRY          15<br />ROBOTS_DENIED  18<br />SUCCESS        1<br />TEMP_MOVED      13<br />WOULDBLOCK      22<br /><br /><b>signature</b> - This parse field contains a signature calculated every time a page is fetched so that Nutch knows whether a page has changed or not the next time it does a fetch. The default signature calculation implementation uses both content and header as information for calculating the signature. For various reasons (etags, etc.) the header can change without the actual content changing making the default implementation less than optimal for most requirements. For those looking to save some bandwidth on current status crawl or those implementing archival crawling (requires more changes than just this) the <a href="http://nutch.apache.org/apidocs-2.0/org/apache/nutch/crawl/TextProfileSignature.html" title="TextProfileSignature">TextProfileSignature</a> implementation is more appropriate. The signature calculation implementation can be changed by copying the db.signature.class property from conf/nutch-default.xml to conf/nutch-site.xml and changing the value to org.apache.nutch.crawl.TextProfileSignature. <br />example (16 bytes): <code>e1 f7 cc cc 49 7a 45 6b e7 fc 05 68 9a e8 ea 93</code><br /><br /><b>metadata</b> - This is a mixed catch all field for metadata (see <a href="http://nutch.apache.org/apidocs-2.0/org/apache/nutch/metadata/package-summary.html" target="_blank" title="medata-package-summary">metadata-package-summary.html</a>). The <a href="http://wiki.apache.org/nutch/IndexMetatags" title="Metatags">IndexMetatags</a> plugin does not work with Nutch 2.0 but may work with patches or more recent versions. <a href="http://nutch.apache.org/apidocs-2.0/org/apache/nutch/metadata/package-summary.html" target="_blank" title="metadata-package-summary">metadata-package-summary.html</a> has more information.<br />example: <code>_csh_ :ﾃつｹ)elanguageen</code><br /><br />*Thanks to Ferdy Galema for comments on the marker and redirect.